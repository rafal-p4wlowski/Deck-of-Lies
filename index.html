<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deck of Lies</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="main-layout">
        <!-- Skróty klawiaturowe - lewa kolumna -->
        <div id="keyboard-shortcuts" class="no-scrollbar">
            <h3 data-lang="keyboard-shortcuts">Keyboard Shortcuts</h3>
            <ul>
                <li><kbd>Space</kbd> - <span data-lang="play-card">Perform action</span></li>
                <li><kbd>W</kbd> - <span data-lang="declare-winners">Declare winner</span></li>
                <li><kbd>C</kbd> - <span data-lang="challenge-liar">Challenge liar</span></li>
                <li><kbd>Y</kbd> - <span data-lang="yes">Yes</span></li>
                <li><kbd>N</kbd> - <span data-lang="no">No</span></li>
                <li><kbd>R</kbd> - <span data-lang="reset">Reset game</span></li>
                <li><kbd>ESC</kbd> - <span data-lang="return-to-menu">Return to menu</span></li>
            </ul>
        </div>

        <!-- Główny kontener gry - środkowa kolumna -->
        <div id="game-container" class="no-scrollbar">
            <h1>Deck of Lies</h1>

            <!-- Menu główne -->
            <div id="main-menu" class="active">
                <div class="menu-buttons">
                    <button id="last-game" data-lang="last-game">Last Game</button>
                    <button id="new-game-setup" data-lang="new-game">New Game</button>
                    <button id="game-settings" data-lang="settings">Settings</button>
                    <button id="game-rules" data-lang="game-rules">Game Rules</button>
                </div>
            </div>

            <!-- Menu ustawień gry -->
            <div id="settings-menu" class="hidden">
                <h2 data-lang="settings">Settings</h2>
                <div class="settings-content">
                    <div class="settings-section">
                        <h3 data-lang="language">Language</h3>
                        <div class="setting-control">
                            <label for="language-select" data-lang="select-language">Select language:</label>
                            <select id="language-select">
                                <option value="en">English</option>
                                <option value="pl">Polski</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3 data-lang="table-cards">Table Cards</h3>
                        <p data-lang="select-table-cards">Select which cards can be drawn as table cards:</p>
                        <div id="table-card-selector" class="card-selector">
                            <!-- Cards will be generated by JavaScript -->
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3 data-lang="initial-trigger-pulls">Initial Trigger Pulls</h3>
                        <div class="setting-control">
                            <label for="starting-shots" data-lang="initial-shots">Initial number of trigger pulls:</label>
                            <input type="number" id="starting-shots" min="0" max="5" value="0">
                        </div>
                    </div>
                </div>
                <button id="back-to-main-from-settings" data-lang="return-to-menu">Return to Menu</button>
            </div>

            <!-- Menu zasad gry -->
            <div id="rules-menu" class="hidden">
                <h2 data-lang="game-rules">Game Rules</h2>
                <div class="rules-content">
                    <h3 data-lang="game-objective">Game Objective</h3>
                    <ul>
                        <li data-lang="objective-desc-1">Players try to convince others that their declarations about the cards they hold are true – even if they're bluffing</li>
                        <li data-lang="objective-desc-2">The goal is to eliminate opponents or get rid of all your cards.</li>
                    </ul>

                    <h3 data-lang="general-rules">General Rules</h3>
                    <ul>
                        <li data-lang="win-condition">Win condition: Be the last one standing or get rid of all your cards!</li>
                        <li data-lang="turn-order">The player to the left is the previous player, the player to the right is the next player.</li>
                        <li data-lang="round-end">Each round ends with challenging the previous player and taking a shot based on the revealed cards.</li>
                        <li data-lang="hidden-cards">Cards are not revealed unless challenged, so bluffing is possible.</li>
                        <li data-lang="table-card-rule">One card from Q/K/A is designated as the Table Card</li>
                    </ul>

                    <h3 data-lang="standard-game-requirements">What Will You Need For A Standard Game?</h3>
                    <ul>
                        <li data-lang="required-cards">Cards: Queen (Q) ×6, King (K) ×6, Ace (A) ×6, Joker ×2. (★)</li>
                        <li data-lang="required-table">Table or flat surface for play.</li>
                        <li data-lang="required-players">From 2 to 4 players.</li>
                    </ul>

                    <h3 data-lang="special-cards">Special Cards</h3>
                    <ul>
                        <li data-lang="table-card-desc">Table Card: A randomly selected face card (Q, K, or A) that determines which cards players must (or pretend to) play in a given round.</li>
                        <li data-lang="joker-desc">Joker: A wild card that can substitute for any required table card (Q, K, or A).</li>
                    </ul>

                    <h3 data-lang="turn-sequence">Turn Sequence</h3>
                    <ul>
                        <li data-lang="play-cards">In your turn, you can play cards, placing them face down in the center of the table.</li>
                        <li data-lang="next-player-choice">The next player can either believe you and play their cards or challenge your truthfulness by saying "Liar!".</li>
                    </ul>

                    <h3 data-lang="liar-challenge">Liar Challenge</h3>
                    <ul>
                        <li data-lang="challenge-procedure">If someone challenges your declaration:</li>
                        <ul>
                            <li data-lang="cards-revealed">- The played cards are revealed</li>
                            <li data-lang="check-requirements">- It's checked whether all cards match the current requirement (table card)</li>
                        </ul>
                    </ul>
                    <ul>
                        <li data-lang="truthful-outcome">If the player's declaration turns out to be true – the challenger must pull the trigger of the revolver.</li>
                        <li data-lang="lying-outcome">If bluffing is discovered – the player who lied must pull the trigger.</li>
                    </ul>

                    <h3 data-lang="russian-roulette">Russian Roulette</h3>
                    <ul>
                        <li data-lang="revolver-desc">Each player's revolver is loaded with one bullet, randomly positioned between shots 1-6. The indicator (x/6) of other players shows the shots[...]
                        <li data-lang="loser-shoots">The player who lost the challenge must pull the trigger of the revolver.</li>
                        <li data-lang="shoot-outcome-death">If the revolver fires, the player loses and is out of the game.</li>
                        <li data-lang="shoot-outcome-survive">If the revolver doesn't fire, the game continues.</li>
                    </ul>

                    <h3 data-lang="game-flow">Game Flow</h3>
                    <ul>
                        <li data-lang="after-shot">After each shot from the revolver (regardless of the outcome), new cards are dealt and a new table card is drawn.</li>
                        <li data-lang="game-end">The game ends when only one living player remains or when a player gets rid of all their cards.</li>
                    </ul>

                    <button id="back-to-main" data-lang="return-to-menu">Return to Menu</button>
                </div>
            </div>


            <!-- Menu ustawień nowej gry -->
            <div id="setup-menu" class="hidden">
                <h2 data-lang="new-game">New Game</h2>
                <div id="player-setup">
                    <div class="player-entry" data-player-id="1">
                        <input type="text" class="player-name" placeholder="Player 1" value="Player 1">
                        <button class="remove-player" disabled data-lang="remove">Remove</button>
                    </div>
                    <div class="player-entry" data-player-id="2">
                        <input type="text" class="player-name" placeholder="Player 2" value="Player 2">
                        <button class="remove-player" data-lang="remove">Remove</button>
                    </div>
                    <div class="player-entry" data-player-id="3">
                        <input type="text" class="player-name" placeholder="Player 3" value="Player 3">
                        <button class="remove-player" data-lang="remove">Remove</button>
                    </div>
                    <div class="player-entry" data-player-id="4">
                        <input type="text" class="player-name" placeholder="Player 4" value="Player 4">
                        <button class="remove-player" data-lang="remove">Remove</button>
                    </div>
                </div>
                <div class="setup-actions">
                    <button id="add-player" data-lang="add-player">Add Player</button>
                    <button id="start-game" data-lang="start-game">Start Game</button>
                    <button id="back-to-main-from-setup" data-lang="return-to-menu">Return to Menu</button>
                </div>
            </div>

            <!-- Ekran gry -->
            <div id="game-screen" class="hidden">
                <div class="game-info">
                    <h2 data-lang="table-card">Table Card:</h2>
                    <div id="table-card-container" class="game-cards cards--poker">
                        <!-- Table card will be displayed here -->
                    </div>
                </div>

                <h3><span data-lang="current-turn">Current turn:</span> <span id="current-player">-</span></h3>

                <div id="players-container">
                    <!-- Players will be generated here -->
                </div>

                <div class="game-actions">
                    <div class="card-play-buttons">
                        <button id="play-card" data-lang="play-card-btn">Play/Shoot [Space]</button>
                    </div>
                    <div class="challenge-buttons">
                        <button id="challenge-liar" data-lang="challenge-liar-btn">Challenge liar [C]</button>
                        <button id="win" data-lang="declare-winner-btn">Declare winner [W]</button> <!-- Changed ID and data-lang -->
                    </div>
                </div>

                <div class="bottom-actions">
                    <button id="reset-game" data-lang="reset-game-btn">Reset game [R]</button>
                    <button id="return-to-menu" data-lang="return-to-menu-btn">Return to menu [ESC]</button>
                </div>
            </div>

            <!-- New Modal for Confirming Single Winner -->
            <div id="confirmWinnerModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3 data-lang="confirm-winner-title">Confirm Winner</h3>
                    <p id="confirmWinnerMessage"></p> <!-- Message will be set by JS -->
                    <button id="confirmWinnerYes" data-lang="yes">[Y] Yes</button>
                    <button id="confirmWinnerNo" data-lang="no">[N] No</button>
                </div>
            </div>
        </div>

        <!-- Log gry - prawa kolumna -->
        <div id="game-log" class="no-scrollbar">
            <h3 data-lang="game-log">Game Log:</h3>
            <div id="log-entries" class="no-scrollbar"></div>
        </div>

        <script src="script.js"></script>
    </div>
</body>

</html>
